"use strict";(self["webpackChunktradetrove"]=self["webpackChunktradetrove"]||[]).push([[100],{1241:function(e,a){a.A=(e,a)=>{const s=e.__vccOpts||e;for(const[l,r]of a)s[l]=r;return s}},6018:function(e,a,s){s.d(a,{O:function(){return r}});var l=s(3367);const r=(0,l.nY)("errors",{state:()=>({errorMessages:{"Authentication failed":"Неверный пароль. Попробуйте снова"}}),actions:{setErrors(e){this.errors=e}}})},8100:function(e,a,s){s.r(a),s.d(a,{default:function(){return A}});s(4114);var l=s(6768),r=s(5130),o=s(4232),t=s(144),i=s(8145),n=s(1387),u=s(6018),d=s(5665);const c=e=>((0,l.Qi)("data-v-4a1c68aa"),e=e(),(0,l.jt)(),e),v={class:"center"},_={class:"login"},p={class:"container login__content"},f=c((()=>(0,l.Lk)("h2",{class:"login__title title"},"Вход",-1))),m={class:"form__fields"},k={key:0,class:"form-field__errors"},b={class:"form-field__error"},g=["type"],w={key:0,class:"form-field__errors"},L={class:"form-field__error"},C={class:"form__actions"},h={class:"form__btn-wrapper"},y={key:0,class:"form__btn-wrapper-wrapper"},E=["disabled"],X=["disabled"],K={class:"form__error"},F={class:"login__register-wrapper"},R=c((()=>(0,l.Lk)("div",{class:"login__agreement"},[(0,l.Lk)("p",null," При регистрации и входе вы соглашаетесь с условиями использования TradeTrove и политикой конфиденциальности. ")],-1)));var O={__name:"LoginView",setup(e){const a=(0,i.r)().host,s=(0,d.n)(),c=(0,n.rd)(),O=(0,u.O)().errorMessages,T=(0,t.KR)(!1),j=(0,t.KR)(!1),A=(0,t.KR)([]),I=(0,t.KR)(""),Q=(0,t.KR)(""),S=(0,t.KR)(""),U=async e=>{const l=e.target;T.value=!0;const r=await fetch(`${a}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l.email.value,password:l.password.value})}),o=await r.json();T.value=!1,o&&(o.success?(s.setUser(o.data),c.push("/")):o.errors?A.value=o.errors:I.value=O[o.message]||"Что-то пошло не так")};return(e,a)=>{const s=(0,l.g2)("font-awesome-icon"),t=(0,l.g2)("router-link"),i=(0,l.gN)("tippy");return(0,l.uX)(),(0,l.CE)("div",v,[(0,l.Lk)("div",_,[(0,l.Lk)("div",p,[f,(0,l.Lk)("form",{onSubmit:(0,r.D$)(U,["prevent"]),class:"login__form form"},[(0,l.Lk)("div",m,[(0,l.Lk)("div",{class:(0,o.C4)([{invalid:A.value.email},"form__field form-field"])},[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>Q.value=e),name:"email",type:"email",class:"form-field__input",placeholder:"Email"},null,512),[[r.Jo,Q.value]]),A.value.email?((0,l.uX)(),(0,l.CE)("div",k,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(A.value.email,(e=>((0,l.uX)(),(0,l.CE)("div",b,(0,o.v_)(e),1)))),256))])):(0,l.Q3)("",!0)],2),(0,l.Lk)("div",{class:(0,o.C4)([{invalid:A.value.password},"form__field form-field"])},[(0,l.Lk)("div",{class:(0,o.C4)(["form-field__input-wrapper form-field__input-wrapper--password",{"show-password":j.value}])},[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>S.value=e),name:"password",type:j.value?"text":"password",class:"form-field__input",placeholder:"Пароль"},null,8,g),[[r.hp,S.value]]),(0,l.Lk)("button",{onClick:a[2]||(a[2]=e=>j.value=!j.value),type:"button",class:"form-field__toggle-pas form-field__toggle-pas--show"},[(0,l.bF)(s,{icon:"eye"})]),(0,l.Lk)("button",{onClick:a[3]||(a[3]=e=>j.value=!j.value),type:"button",class:"form-field__toggle-pas form-field__toggle-pas--hide"},[(0,l.bF)(s,{icon:"eye-slash"})])],2),A.value.password?((0,l.uX)(),(0,l.CE)("div",w,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(A.value.password,(e=>((0,l.uX)(),(0,l.CE)("div",L,(0,o.v_)(e),1)))),256))])):(0,l.Q3)("",!0)],2)]),(0,l.Lk)("div",C,[(0,l.bF)(t,{to:"/restore",class:"link"},{default:(0,l.k6)((()=>[(0,l.eW)("Восстановить пароль")])),_:1})]),(0,l.Lk)("div",h,[Q.value&&S.value?((0,l.uX)(),(0,l.CE)("button",{key:1,class:(0,o.C4)([{"btn-loader":T.value},"form__btn btn"]),disabled:!(Q.value&&S.value&&!T.value),type:"submit"}," Войти ",10,X)):(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",y,[(0,l.Lk)("button",{class:(0,o.C4)([{"btn-loader":T.value},"form__btn btn"]),disabled:!(Q.value&&S.value&&!T.value),type:"submit"}," Войти ",10,E)])),[[i,{content:"Заполните все поля"}]])]),(0,l.Lk)("div",K,(0,o.v_)(I.value),1)],32),(0,l.Lk)("div",F,[(0,l.bF)(t,{class:"login__register link",to:"/register"},{default:(0,l.k6)((()=>[(0,l.eW)("Зарегистрироваться")])),_:1})]),R])])])}}},T=s(1241);const j=(0,T.A)(O,[["__scopeId","data-v-4a1c68aa"]]);var A=j}}]);
//# sourceMappingURL=100.42bb4de6.js.map