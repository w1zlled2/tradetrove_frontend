"use strict";(self["webpackChunktradetrove"]=self["webpackChunktradetrove"]||[]).push([[914],{1241:function(e,s){s.A=(e,s)=>{const l=e.__vccOpts||e;for(const[a,r]of s)l[a]=r;return l}},6018:function(e,s,l){l.d(s,{O:function(){return r}});var a=l(3367);const r=(0,a.nY)("errors",{state:()=>({errorMessages:{"Authentication failed":"Неверный пароль. Попробуйте снова"}}),actions:{setErrors(e){this.errors=e}}})},7914:function(e,s,l){l.r(s),l.d(s,{default:function(){return A}});l(4114);var a=l(6768),r=l(5130),o=l(4232),i=l(144),t=l(8145),n=l(1387),d=l(6018),u=l(5665);const f=e=>((0,a.Qi)("data-v-27687f5e"),e=e(),(0,a.jt)(),e),c={class:"center"},_={class:"login"},v={class:"container login__content"},m=f((()=>(0,a.Lk)("h2",{class:"login__title title"},"Вход",-1))),p={class:"form__fields"},k=f((()=>(0,a.Lk)("div",{class:"form-field__label"},"Email",-1))),b={key:0,class:"form-field__errors"},g={class:"form-field__error"},L=f((()=>(0,a.Lk)("div",{class:"form-field__label"},"Пароль",-1))),w=["type"],h={key:0,class:"form-field__errors"},y={class:"form-field__error"},C={class:"form__actions"},E=f((()=>(0,a.Lk)("div",{class:"form-field form-field--checkbox"},[(0,a.Lk)("input",{name:"remember",id:"remember",type:"checkbox",class:"form-field__input"}),(0,a.Lk)("label",{for:"remember",class:"form-field__label"},"Запомнить меня")],-1))),K={class:"form__btn-wrapper"},X=["disabled"],F={class:"form__error"},O={class:"login__register-wrapper"},R=f((()=>(0,a.Lk)("div",{class:"login__agreement"},[(0,a.Lk)("p",null,"При регистрации и входе вы соглашаетесь с условиями использования TradeTrove и политикой конфиденциальности.")],-1)));var T={__name:"LoginView",setup(e){const s=(0,t.r)().host,l=(0,u.n)(),f=(0,n.rd)(),T=(0,d.O)().errorMessages,j=(0,i.KR)(!1),x=(0,i.KR)([]),A=(0,i.KR)(""),I=(0,i.KR)(""),Q=(0,i.KR)(""),S=async e=>{const a=e.target,r=await fetch(`${s}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email.value,password:a.password.value})}),o=await r.json();o&&(o.success?(l.setUser(o.data),f.push("/")):o.errors?x.value=o.errors:A.value=T[o.message]||"Что-то пошло не так")};return(e,s)=>{const l=(0,a.g2)("font-awesome-icon"),i=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("div",_,[(0,a.Lk)("div",v,[m,(0,a.Lk)("form",{onSubmit:(0,r.D$)(S,["prevent"]),class:"login__form form"},[(0,a.Lk)("div",p,[(0,a.Lk)("div",{class:(0,o.C4)([{invalid:x.value.email},"form__field form-field"])},[k,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>I.value=e),name:"email",type:"email",class:"form-field__input"},null,512),[[r.Jo,I.value]]),x.value.email?((0,a.uX)(),(0,a.CE)("div",b,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(x.value.email,(e=>((0,a.uX)(),(0,a.CE)("div",g,(0,o.v_)(e),1)))),256))])):(0,a.Q3)("",!0)],2),(0,a.Lk)("div",{class:(0,o.C4)([{invalid:x.value.password},"form__field form-field"])},[L,(0,a.Lk)("div",{class:(0,o.C4)(["form-field__input-wrapper form-field__input-wrapper--password",{"show-password":j.value}])},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>Q.value=e),name:"password",type:j.value?"text":"password",class:"form-field__input"},null,8,w),[[r.hp,Q.value]]),(0,a.Lk)("button",{onClick:s[2]||(s[2]=e=>j.value=!j.value),type:"button",class:"form-field__toggle-pas form-field__toggle-pas--show"},[(0,a.bF)(l,{icon:"eye"})]),(0,a.Lk)("button",{onClick:s[3]||(s[3]=e=>j.value=!j.value),type:"button",class:"form-field__toggle-pas form-field__toggle-pas--hide"},[(0,a.bF)(l,{icon:"eye-slash"})])],2),x.value.password?((0,a.uX)(),(0,a.CE)("div",h,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(x.value.password,(e=>((0,a.uX)(),(0,a.CE)("div",y,(0,o.v_)(e),1)))),256))])):(0,a.Q3)("",!0)],2)]),(0,a.Lk)("div",C,[E,(0,a.bF)(i,{to:"/restore",class:"link"},{default:(0,a.k6)((()=>[(0,a.eW)("Восстановить пароль")])),_:1})]),(0,a.Lk)("div",K,[(0,a.Lk)("button",{disabled:!I.value||!Q.value,type:"submit",class:"form__btn btn"},"Войти",8,X)]),(0,a.Lk)("div",F,(0,o.v_)(A.value),1)],32),(0,a.Lk)("div",O,[(0,a.bF)(i,{class:"login__register link",to:"/register"},{default:(0,a.k6)((()=>[(0,a.eW)("Зарегистрироваться")])),_:1})]),R])])])}}},j=l(1241);const x=(0,j.A)(T,[["__scopeId","data-v-27687f5e"]]);var A=x}}]);
//# sourceMappingURL=914.7e75771f.js.map