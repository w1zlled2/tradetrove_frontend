"use strict";(self["webpackChunktradetrove"]=self["webpackChunktradetrove"]||[]).push([[44],{1241:function(a,d){d.A=(a,d)=>{const e=a.__vccOpts||a;for(const[t,s]of d)e[t]=s;return e}},6044:function(a,d,e){e.r(d),e.d(d,{default:function(){return ea}});e(4114);var t=e(6768),s=e(5130),o=e(4232),l=e(144),i=e(8145);const r=a=>((0,t.Qi)("data-v-bbedb342"),a=a(),(0,t.jt)(),a),_={class:"add-post"},n={class:"container add-post__content"},b={class:"breadcrumbs add-post__breadcrumbs"},c={class:"breadcrumbs__list"},v={class:"breadcrumbs__separator"},p=r((()=>(0,t.Lk)("span",{class:"breadcrumbs__item"},"Создать объявление",-1))),u=r((()=>(0,t.Lk)("h2",{class:"add-post__title title"},"Создать объявление",-1))),f={class:"add-post__form form-add-post"},m={class:"form-add-post__category"},k=r((()=>(0,t.Lk)("h3",{class:"form-add-post__category-label"},"Параметры",-1))),g={class:"form-add-post__category-list"},L=(0,t.Fv)('<div class="form-add-post__field" data-v-bbedb342><div class="form-add-post__label" data-v-bbedb342>Название объявления</div><div class="form-add-post__value" data-v-bbedb342><div class="form-add-post__text" data-v-bbedb342><input type="text" name="title" class="form-add-post__text-input input" data-v-bbedb342></div></div></div><div class="form-add-post__field" data-v-bbedb342><div class="form-add-post__label" data-v-bbedb342>Состояние</div><div class="form-add-post__value" data-v-bbedb342><div class="form-add-post__value-radio-btn" data-v-bbedb342><div class="form-add-post__radio radio-btn" data-v-bbedb342><input checked type="radio" name="condition" id="new" value="new" class="form-add-post__radio-input radio-btn__input" data-v-bbedb342><label for="new" class="form-add-post__radio-label radio-btn__label" data-v-bbedb342>Новое</label></div><div class="form-add-post__radio radio-btn" data-v-bbedb342><input type="radio" name="condition" id="used" value="used" class="form-add-post__radio-input radio-btn__input" data-v-bbedb342><label for="used" class="form-add-post__radio-label radio-btn__label" data-v-bbedb342>Б/у</label></div></div></div></div><div class="form-add-post__field" data-v-bbedb342><div class="form-add-post__label" data-v-bbedb342>Описание объявления</div><div class="form-add-post__value" data-v-bbedb342><div class="form-add-post__value-textarea" data-v-bbedb342><div class="form-add-post__textarea" data-v-bbedb342><textarea name="description" class="form-add-post__textarea-input textarea" data-v-bbedb342></textarea></div></div></div></div>',3),y={class:"form-add-post__field"},h=r((()=>(0,t.Lk)("div",{class:"form-add-post__label"},"Цена",-1))),x={class:"form-add-post__value"},C={class:"form-add-post__text form-add-post__text--price"},w={class:"form-add-post__field"},D=r((()=>(0,t.Lk)("div",{class:"form-add-post__label"},"Фотографии",-1))),R={class:"form-add-post__value"},F={class:"form-add-post__files"},K={class:"form-add-post__files-list"},E=["onClick"],T=["src"],I={for:"files",class:"form-add-post__files-label load-file"},X=r((()=>(0,t.Lk)("span",{class:"form-add-post__files-drop-text"},"Перенесите сюда фотографии для загрузки",-1))),j=[X],J={class:"form-add-post__category"},U=r((()=>(0,t.Lk)("h3",{class:"form-add-post__category-label"},"Место сделки",-1))),V={class:"form-add-post__category-list"},$={class:"form-add-post__field"},A={class:"form-add-post__value"},B={class:"form-add-post__text form-add-post__text--address"},O={class:"form-add-post__text-suggest field-suggest"},N={class:"field-suggest__list"},P=["onClick"],S={class:"form-add-post__category"},W=r((()=>(0,t.Lk)("h3",{class:"form-add-post__category-label"},"Контакты",-1))),G={class:"form-add-post__category-list"},Q={class:"form-add-post__field"},q=r((()=>(0,t.Lk)("div",{class:"form-add-post__label"},"Телефон",-1))),z={class:"form-add-post__value"},H={class:"form-add-post__text"},M=(0,t.Fv)('<div class="form-add-post__field" data-v-bbedb342><div class="form-add-post__label" data-v-bbedb342>Способ связи</div><div class="form-add-post__value" data-v-bbedb342><div class="form-add-post__value-radio" data-v-bbedb342><div class="form-add-post__radio radio" data-v-bbedb342><input checked type="radio" name="connect_type" id="calls_messages" value="calls_messages" class="form-add-post__radio-input radio__input" data-v-bbedb342><label for="calls_messages" class="form-add-post__radio-label radio__label" data-v-bbedb342>Звонки и сообщения</label></div><div class="form-add-post__radio radio" data-v-bbedb342><input type="radio" name="connect_type" id="calls" value="calls" class="form-add-post__radio-input radio__input" data-v-bbedb342><label for="calls" class="form-add-post__radio-label radio__label" data-v-bbedb342>Только звонки</label></div><div class="form-add-post__radio radio" data-v-bbedb342><input type="radio" name="connect_type" id="messages" value="messages" class="form-add-post__radio-input radio__input" data-v-bbedb342><label for="messages" class="form-add-post__radio-label radio__label" data-v-bbedb342>Только сообщения</label></div></div></div></div>',1),Y=r((()=>(0,t.Lk)("div",{class:"form-add-post__btns"},[(0,t.Lk)("button",{type:"button",class:"form-add-post__btn btn btn--dark"},"Создать"),(0,t.Lk)("button",{type:"button",class:"form-add-post__btn btn"},"Сохранить в черновик")],-1)));var Z={__name:"CreatePostView",setup(a){const d=(0,i.r)().host,e=(0,l.KR)(""),r=a=>("0"===a[0]&&"0"!==a[1]&&(a=a.slice(1)),a.replace(/\B(?=(\d{3})+(?!\d))/g," "));(0,t.wB)(e,(a=>{e.value=a.replace(/\D/g,""),e.value=r(e.value)}));const X=(0,l.KR)([]),Z=async a=>{if(a.length<=5)return void(X.value.length>0&&(X.value=[]));const e=await fetch(`${d}/api/dadata-validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:a})});if(console.log(e),!e.ok){const a=await(e?.json());return void(a?.message?alert("Ошибка: "+a?.message):alert("Ошибка: "+e.status+" "+e.statusText))}const t=await(e?.json());if(!t)return;console.log(t);const s=t?.data,o=s?.suggestions;if(!o)return;X.value=[];for(const d of o)X.value.push(d.value)};let aa=null;const da=(0,l.KR)(""),ea=a=>{clearTimeout(aa),aa=setTimeout((()=>{const d=a.target.value;X.value.find((a=>a===d))||Z(d)}),1e3)},ta=a=>{da.value=a,X.value=[]};document.addEventListener("click",(a=>{const d=a.target;d.closest(".field-suggest__list")||d.closest(".form-add-post__text-input")||(X.value=[])}));const sa=(0,l.KR)("");(0,t.wB)(sa,(a=>{console.log(a)}));const oa=(0,l.KR)(!1),la=(0,l.KR)(null),ia=(0,l.KR)([]),ra=((0,l.KR)(!1),a=>{a.preventDefault(),oa.value=!0}),_a=()=>{oa.value=!1},na=a=>{for(const d of a)if(d.type.startsWith("image/")){const a=new FileReader;a.onload=a=>{ia.value.push({url:a.target.result})},a.readAsDataURL(d)}else console.log("Попытка загрузить файл типа: "+d.type+" (разрешены только изображения)")},ba=()=>{const a=la.value.files;na(a)},ca=a=>{a.preventDefault(),oa.value=!1;const d=a.dataTransfer.files;na(d)},va=a=>{ia.value.splice(a,1)};return(a,d)=>{const l=(0,t.g2)("router-link"),i=(0,t.g2)("font-awesome-icon"),r=(0,t.gN)("mask");return(0,t.uX)(),(0,t.CE)("div",_,[(0,t.Lk)("div",n,[(0,t.Lk)("div",b,[(0,t.Lk)("div",c,[(0,t.bF)(l,{to:"/",class:"breadcrumbs__item link"},{default:(0,t.k6)((()=>[(0,t.eW)("Главная")])),_:1}),(0,t.Lk)("span",v,[(0,t.bF)(i,{icon:"chevron-right"})]),p])]),u,(0,t.Lk)("div",f,[(0,t.Lk)("div",m,[k,(0,t.Lk)("div",g,[L,(0,t.Lk)("div",y,[h,(0,t.Lk)("div",x,[(0,t.Lk)("div",C,[(0,t.bF)(i,{icon:"ruble-sign"}),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":d[0]||(d[0]=a=>e.value=a),maxlength:"112",type:"text",name:"price",class:"form-add-post__text-input input"},null,512),[[s.Jo,e.value]])])])]),(0,t.Lk)("div",w,[D,(0,t.Lk)("div",R,[(0,t.Lk)("div",F,[(0,t.Lk)("input",{ref_key:"fileInputRef",ref:la,onChange:ba,type:"file",name:"files[]",id:"files",multiple:"",accept:"image/*",class:"form-add-post__files-input input-hidden"},null,544),(0,t.Lk)("div",K,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ia.value,((a,d)=>((0,t.uX)(),(0,t.CE)("div",{key:d,class:"form-add-post__files-label load-file load-file--preview"},[(0,t.Lk)("button",{type:"button",class:"load-file__remove-btn",onClick:a=>va(d)},[(0,t.bF)(i,{icon:"xmark"})],8,E),(0,t.Lk)("img",{src:a.url,alt:""},null,8,T)])))),128)),(0,t.Lk)("label",I,[(0,t.bF)(i,{icon:"plus"})])]),(0,t.Lk)("label",{class:(0,o.C4)([{over:oa.value},"form-add-post__files-drop"]),onDragstart:d[1]||(d[1]=(0,s.D$)((a=>console.log("dragstart")),["prevent"])),onDragover:d[2]||(d[2]=(0,s.D$)((a=>console.log("dragover")),["prevent"])),onDragenter:(0,s.D$)(ra,["prevent"]),onDragleave:_a,onDrop:ca,for:"files"},j,34)])])])])]),(0,t.Lk)("div",J,[U,(0,t.Lk)("div",V,[(0,t.Lk)("div",$,[(0,t.Lk)("div",A,[(0,t.Lk)("div",B,[(0,t.bo)((0,t.Lk)("input",{onInput:ea,"onUpdate:modelValue":d[3]||(d[3]=a=>da.value=a),type:"text",name:"address",class:"form-add-post__text-input input",placeholder:"Начните вводить адрес",autocomplete:"off"},null,544),[[s.Jo,da.value]]),(0,t.bo)((0,t.Lk)("div",O,[(0,t.Lk)("div",N,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(X.value,((a,d)=>((0,t.uX)(),(0,t.CE)("button",{key:d,onClick:d=>ta(a),type:"button",class:"field-suggest__item"},(0,o.v_)(a),9,P)))),128))])],512),[[s.aG,X.value.length]])])])])])]),(0,t.Lk)("div",S,[W,(0,t.Lk)("div",G,[(0,t.Lk)("div",Q,[q,(0,t.Lk)("div",z,[(0,t.Lk)("div",H,[(0,t.bo)((0,t.Lk)("input",{placeholder:"+7 (___) ___-__-__","onUpdate:modelValue":d[4]||(d[4]=a=>sa.value=a),type:"text",name:"title",class:"form-add-post__text-input input"},null,512),[[r,"+7 (###) ###-##-##"],[s.Jo,sa.value]])])])]),M])]),Y])])])}}},aa=e(1241);const da=(0,aa.A)(Z,[["__scopeId","data-v-bbedb342"]]);var ea=da}}]);
//# sourceMappingURL=44.b1126eb2.js.map