"use strict";(self["webpackChunktradetrove"]=self["webpackChunktradetrove"]||[]).push([[433],{1241:function(e,l){l.A=(e,l)=>{const a=e.__vccOpts||e;for(const[s,o]of l)a[s]=o;return a}},6018:function(e,l,a){a.d(l,{O:function(){return o}});var s=a(3367);const o=(0,s.nY)("errors",{state:()=>({errorMessages:{"Authentication failed":"Неверный пароль. Попробуйте снова"}}),actions:{setErrors(e){this.errors=e}}})},4814:function(e,l,a){a.r(l),a.d(l,{default:function(){return D}});a(4114);var s=a(6768),o=a(5130),i=a(4232),u=a(144),r=a(8145),t=a(1387),v=a(6018),n=a(5665);const d=e=>((0,s.Qi)("data-v-5b43a399"),e=e(),(0,s.jt)(),e),f={class:"center"},_={class:"login"},c={class:"container login__content"},m=d((()=>(0,s.Lk)("h2",{class:"login__title title"},"Регистрация",-1))),p={class:"form__fields"},k={class:"form-field__label form-field__label--email"},b=d((()=>(0,s.Lk)("span",null,"Email",-1))),g={key:0,class:"loader",style:{width:"20px",height:"20px","--bor-w":"3px"}},w={key:0,class:"form-field__errors"},C={class:"form-field__error"},L=d((()=>(0,s.Lk)("div",{class:"form-field__label"},"Имя",-1))),y={key:0,class:"form-field__errors"},h={class:"form-field__error"},E=d((()=>(0,s.Lk)("div",{class:"form-field__label"},"Фамилия",-1))),K={key:0,class:"form-field__errors"},X={class:"form-field__error"},R=d((()=>(0,s.Lk)("div",{class:"form-field__label"},"Пароль",-1))),F=["type"],x={key:0,class:"form-field__errors"},S={class:"form-field__error"},Q={class:"form-field__validations"},I={key:0,class:"form-field__validation-icon form-field__validation-icon--error"},O={key:1,class:"form-field__validation-icon form-field__validation-icon--success"},B={class:"form-field__validation-text"},T=d((()=>(0,s.Lk)("div",{class:"form-field__label"},"Повторите пароль",-1))),V=["type"],j={key:0,class:"form-field__errors"},J={class:"form-field__error"},U={class:"form__btn-wrapper"},W=["disabled"],A={class:"form__error"},$={class:"login__register-wrapper"},M=d((()=>(0,s.Lk)("div",{class:"login__agreement"},[(0,s.Lk)("p",null," При регистрации и входе вы соглашаетесь с условиями использования TradeTrove и политикой конфиденциальности. ")],-1)));var N={__name:"RegisterView",setup(e){const l=(0,r.r)().host,a=(0,t.rd)(),d=(0,v.O)().errorMessages,N=((0,n.n)(),(0,u.KR)([])),P=(0,u.KR)(""),z=(0,u.KR)(""),D=(0,u.KR)(""),Y=(0,u.KR)(""),Z=(0,u.KR)(""),q=(0,u.KR)(!1),G=(0,u.KR)(""),H=(0,u.KR)(!1),ee=(0,u.KR)(!1),le=(0,u.KR)(!1),ae=(0,u.KR)({minlength:{text:"Минимальная длина пароля 8 символов",value:!0},lowerCaseLetter:{text:"Пароль должен содержать хотя бы одну строчную букву",value:!0},upperCaseLetter:{text:"Пароль должен содержать хотя бы одну заглавную букву",value:!0},number:{text:"Пароль должен содержать хотя бы одну цифру",value:!0}}),se=(0,u.KR)(!0),oe=(0,s.EW)((()=>!(z.value&&D.value&&Y.value&&Z.value&&G.value&&ie.value&&!se.value))),ie=(0,s.EW)((()=>Z.value===G.value));(0,s.wB)([Z,G,ee,le],(()=>{ee.value||le.value||(G.value&&G.value!=Z.value?N.value.passwordSubmit=["Пароли должны совпадать"]:N.value.passwordSubmit=null)})),(0,s.wB)([Z,G],(()=>{Z.value&&G.value&&Z.value!=G.value||(N.value.passwordSubmit=null)})),(0,s.wB)(Z,(()=>{Z.value.length<8?(ae.value.minlength.value=!0,se.value=!0):(ae.value.minlength.value=!1,se.value=!1),/[a-z]/.test(Z.value)?(ae.value.lowerCaseLetter.value=!1,se.value=!1):(ae.value.lowerCaseLetter.value=!0,se.value=!0),/[A-Z]/.test(Z.value)?(ae.value.upperCaseLetter.value=!1,se.value=!1):(ae.value.upperCaseLetter.value=!0,se.value=!0),/[0-9]/.test(Z.value)?(ae.value.number.value=!1,se.value=!1):(ae.value.number.value=!0,se.value=!0)}));(0,u.KR)(!1);const ue=(0,u.KR)(!1),re=(0,u.KR)(null),te=(0,u.KR)(null),ve=async e=>{ue.value&&(ue.value=!1)},ne=async e=>{if(z.value&&te.value.validity.valid){ue.value=!0;const e=await fetch(`${l}/api/check-email`,{method:"POST",body:JSON.stringify({email:z.value}),headers:{"Content-Type":"application/json"}}),a=await(e?.json());ue.value=!1,console.log(a),a?.success?(N.value.email=null,re.value=!0):(N.value.email=["Такой email уже зарегистрирован"],re.value=!1)}},de=async e=>{const s=e.target,o=await fetch(`${l}/api/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.email.value,password:s.password.value,first_name:s.first_name.value,last_name:s.last_name.value})}),i=await o.json();i&&(i.success?a.push("/login"):i.errors?N.value=i.errors:P.value=d[i.message]||"Что-то пошло не так")};return(e,l)=>{const a=(0,s.g2)("font-awesome-icon"),u=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",f,[(0,s.Lk)("div",_,[(0,s.Lk)("div",c,[m,(0,s.Lk)("form",{onSubmit:(0,o.D$)(de,["prevent"]),class:"login__form form"},[(0,s.Lk)("div",p,[(0,s.Lk)("div",{class:(0,i.C4)([{invalid:N.value.email},"form__field form-field"])},[(0,s.Lk)("div",k,[b,ue.value?((0,s.uX)(),(0,s.CE)("div",g)):(0,s.Q3)("",!0),!0!==re.value||ue.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(a,{key:1,icon:"fa-solid fa-check",style:{color:"var(--green-color)"}})),!1!==re.value||ue.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(a,{key:2,icon:"fa-solid fa-xmark",style:{color:"var(--red-color)"}}))]),(0,s.bo)((0,s.Lk)("input",{ref_key:"emailElement",ref:te,onBlur:ne,onFocus:ve,"onUpdate:modelValue":l[0]||(l[0]=e=>z.value=e),name:"email",type:"email",class:"form-field__input"},null,544),[[o.Jo,z.value]]),N.value.email?((0,s.uX)(),(0,s.CE)("div",w,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(N.value.email,(e=>((0,s.uX)(),(0,s.CE)("div",C,(0,i.v_)(e),1)))),256))])):(0,s.Q3)("",!0)],2),(0,s.Lk)("div",{class:(0,i.C4)([{invalid:N.value.first_name},"form__field form-field"])},[L,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>D.value=e),name:"first_name",type:"text",class:"form-field__input"},null,512),[[o.Jo,D.value]]),N.value.first_name?((0,s.uX)(),(0,s.CE)("div",y,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(N.value.first_name,(e=>((0,s.uX)(),(0,s.CE)("div",h,(0,i.v_)(e),1)))),256))])):(0,s.Q3)("",!0)],2),(0,s.Lk)("div",{class:(0,i.C4)([{invalid:N.value.last_name},"form__field form-field"])},[E,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>Y.value=e),name:"last_name",type:"text",class:"form-field__input"},null,512),[[o.Jo,Y.value]]),N.value.last_name?((0,s.uX)(),(0,s.CE)("div",K,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(N.value.last_name,(e=>((0,s.uX)(),(0,s.CE)("div",X,(0,i.v_)(e),1)))),256))])):(0,s.Q3)("",!0)],2),(0,s.Lk)("div",{class:(0,i.C4)([{invalid:N.value.password},"form__field form-field"])},[R,(0,s.Lk)("div",{class:(0,i.C4)([{"show-password":q.value},"form-field__input-wrapper form-field__input-wrapper--password"])},[(0,s.bo)((0,s.Lk)("input",{onBlur:l[3]||(l[3]=e=>le.value=!1),onFocus:l[4]||(l[4]=e=>le.value=!0),"onUpdate:modelValue":l[5]||(l[5]=e=>Z.value=e),name:"password",type:q.value?"text":"password",class:"form-field__input"},null,40,F),[[o.hp,Z.value]]),(0,s.Lk)("button",{onClick:l[6]||(l[6]=e=>q.value=!q.value),type:"button",class:"form-field__toggle-pas form-field__toggle-pas--show"},[(0,s.bF)(a,{icon:"eye"})]),(0,s.Lk)("button",{onClick:l[7]||(l[7]=e=>q.value=!q.value),type:"button",class:"form-field__toggle-pas form-field__toggle-pas--hide"},[(0,s.bF)(a,{icon:"eye-slash"})])],2),N.value.password?((0,s.uX)(),(0,s.CE)("div",x,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(N.value.password,(e=>((0,s.uX)(),(0,s.CE)("div",S,(0,i.v_)(e),1)))),256))])):(0,s.Q3)("",!0),(0,s.Lk)("div",Q,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(ae.value,(e=>((0,s.uX)(),(0,s.CE)("div",{class:(0,i.C4)([{invalid:e.value},"form-field__validation"])},[e.value?((0,s.uX)(),(0,s.CE)("div",I,[(0,s.bF)(a,{icon:"times"})])):((0,s.uX)(),(0,s.CE)("div",O,[(0,s.bF)(a,{icon:"check"})])),(0,s.Lk)("div",B,(0,i.v_)(e.text),1)],2)))),256))])],2),(0,s.Lk)("div",{class:(0,i.C4)([{invalid:N.value.passwordSubmit},"form__field form-field"])},[T,(0,s.Lk)("div",{class:(0,i.C4)(["form-field__input-wrapper form-field__input-wrapper--password",{"show-password":H.value}])},[(0,s.bo)((0,s.Lk)("input",{onBlur:l[8]||(l[8]=e=>ee.value=!1),onFocus:l[9]||(l[9]=e=>ee.value=!0),"onUpdate:modelValue":l[10]||(l[10]=e=>G.value=e),name:"passwordSubmit",type:H.value?"text":"password",class:"form-field__input"},null,40,V),[[o.hp,G.value]]),(0,s.Lk)("button",{onClick:l[11]||(l[11]=e=>H.value=!H.value),type:"button",class:"form-field__toggle-pas form-field__toggle-pas--show"},[(0,s.bF)(a,{icon:"eye"})]),(0,s.Lk)("button",{onClick:l[12]||(l[12]=e=>H.value=!H.value),type:"button",class:"form-field__toggle-pas form-field__toggle-pas--hide"},[(0,s.bF)(a,{icon:"eye-slash"})])],2),N.value.passwordSubmit?((0,s.uX)(),(0,s.CE)("div",j,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(N.value.passwordSubmit,(e=>((0,s.uX)(),(0,s.CE)("div",J,(0,i.v_)(e),1)))),256))])):(0,s.Q3)("",!0)],2)]),(0,s.Lk)("div",U,[(0,s.Lk)("button",{disabled:!!oe.value,type:"submit",class:"form__btn btn"}," Зарегистрироваться ",8,W)]),(0,s.Lk)("div",A,(0,i.v_)(P.value),1)],32),(0,s.Lk)("div",$,[(0,s.bF)(u,{class:"login__register link",to:"/login"},{default:(0,s.k6)((()=>[(0,s.eW)("Войти")])),_:1})]),M])])])}}},P=a(1241);const z=(0,P.A)(N,[["__scopeId","data-v-5b43a399"]]);var D=z}}]);
//# sourceMappingURL=433.93ba213a.js.map