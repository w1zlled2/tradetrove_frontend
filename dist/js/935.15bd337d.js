"use strict";(self["webpackChunktradetrove"]=self["webpackChunktradetrove"]||[]).push([[935],{1241:function(e,l){l.A=(e,l)=>{const a=e.__vccOpts||e;for(const[s,r]of l)a[s]=r;return a}},6018:function(e,l,a){a.d(l,{O:function(){return r}});var s=a(3367);const r=(0,s.nY)("errors",{state:()=>({errorMessages:{"Authentication failed":"Неверный пароль. Попробуйте снова"}}),actions:{setErrors(e){this.errors=e}}})},935:function(e,l,a){a.r(l),a.d(l,{default:function(){return M}});a(4114);var s=a(6768),r=a(5130),o=a(4232),i=a(144),t=a(8145),u=a(1387),n=a(6018),d=a(5665);const _=e=>((0,s.Qi)("data-v-933b73f4"),e=e(),(0,s.jt)(),e),f={class:"center"},v={class:"login"},m={class:"container login__content"},p=_((()=>(0,s.Lk)("h2",{class:"login__title title"},"Регистрация",-1))),c={class:"form__fields"},k=_((()=>(0,s.Lk)("div",{class:"form-field__label"},"Email",-1))),b={key:0,class:"form-field__errors"},g={class:"form-field__error"},w=_((()=>(0,s.Lk)("div",{class:"form-field__label"},"Имя",-1))),L={key:0,class:"form-field__errors"},C={class:"form-field__error"},y=_((()=>(0,s.Lk)("div",{class:"form-field__label"},"Фамилия",-1))),h={key:0,class:"form-field__errors"},E={class:"form-field__error"},X=_((()=>(0,s.Lk)("div",{class:"form-field__label"},"Пароль",-1))),K=["type"],F={key:0,class:"form-field__errors"},R={class:"form-field__error"},S=_((()=>(0,s.Lk)("div",{class:"form-field__label"},"Повторите пароль",-1))),I=["type"],Q={key:0,class:"form-field__errors"},V={class:"form-field__error"},O={class:"form__btn-wrapper"},U=["disabled"],x={class:"form__error"},J={class:"login__register-wrapper"},T=_((()=>(0,s.Lk)("div",{class:"login__agreement"},[(0,s.Lk)("p",null,"При регистрации и входе вы соглашаетесь с условиями использования TradeTrove и политикой конфиденциальности.")],-1)));var j={__name:"RegisterView",setup(e){const l=(0,t.r)().host,a=(0,u.rd)(),_=(0,n.O)().errorMessages,j=((0,d.n)(),(0,i.KR)([])),A=(0,i.KR)(""),W=(0,i.KR)(""),M=(0,i.KR)(""),$=(0,i.KR)(""),B=(0,i.KR)(""),D=(0,i.KR)(!1),N=(0,i.KR)(""),P=(0,i.KR)(!1),Y=(0,s.EW)((()=>!(W.value&&M.value&&$.value&&B.value&&N.value&&q.value))),q=(0,s.EW)((()=>B.value===N.value));(0,s.wB)(N,(()=>{N.value&&N.value!=B.value?j.value.passwordSubmit=["Пароли должны совпадать"]:j.value.passwordSubmit=null}));const z=async e=>{const s=e.target,r=await fetch(`${l}/api/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.email.value,password:s.password.value,first_name:s.first_name.value,last_name:s.last_name.value})}),o=await r.json();o&&(o.success?a.push("/login"):o.errors?j.value=o.errors:A.value=_[o.message]||"Что-то пошло не так")};return(e,l)=>{const a=(0,s.g2)("font-awesome-icon"),i=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",f,[(0,s.Lk)("div",v,[(0,s.Lk)("div",m,[p,(0,s.Lk)("form",{onSubmit:(0,r.D$)(z,["prevent"]),class:"login__form form"},[(0,s.Lk)("div",c,[(0,s.Lk)("div",{class:(0,o.C4)([{invalid:j.value.email},"form__field form-field"])},[k,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>W.value=e),name:"email",type:"email",class:"form-field__input"},null,512),[[r.Jo,W.value]]),j.value.email?((0,s.uX)(),(0,s.CE)("div",b,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(j.value.email,(e=>((0,s.uX)(),(0,s.CE)("div",g,(0,o.v_)(e),1)))),256))])):(0,s.Q3)("",!0)],2),(0,s.Lk)("div",{class:(0,o.C4)([{invalid:j.value.first_name},"form__field form-field"])},[w,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>M.value=e),name:"first_name",type:"text",class:"form-field__input"},null,512),[[r.Jo,M.value]]),j.value.first_name?((0,s.uX)(),(0,s.CE)("div",L,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(j.value.first_name,(e=>((0,s.uX)(),(0,s.CE)("div",C,(0,o.v_)(e),1)))),256))])):(0,s.Q3)("",!0)],2),(0,s.Lk)("div",{class:(0,o.C4)([{invalid:j.value.last_name},"form__field form-field"])},[y,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>$.value=e),name:"last_name",type:"text",class:"form-field__input"},null,512),[[r.Jo,$.value]]),j.value.last_name?((0,s.uX)(),(0,s.CE)("div",h,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(j.value.last_name,(e=>((0,s.uX)(),(0,s.CE)("div",E,(0,o.v_)(e),1)))),256))])):(0,s.Q3)("",!0)],2),(0,s.Lk)("div",{class:(0,o.C4)([{invalid:j.value.password},"form__field form-field"])},[X,(0,s.Lk)("div",{class:(0,o.C4)([{"show-password":D.value},"form-field__input-wrapper form-field__input-wrapper--password"])},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>B.value=e),name:"password",type:D.value?"text":"password",class:"form-field__input"},null,8,K),[[r.hp,B.value]]),(0,s.Lk)("button",{onClick:l[4]||(l[4]=e=>D.value=!D.value),type:"button",class:"form-field__toggle-pas form-field__toggle-pas--show"},[(0,s.bF)(a,{icon:"eye"})]),(0,s.Lk)("button",{onClick:l[5]||(l[5]=e=>D.value=!D.value),type:"button",class:"form-field__toggle-pas form-field__toggle-pas--hide"},[(0,s.bF)(a,{icon:"eye-slash"})])],2),j.value.password?((0,s.uX)(),(0,s.CE)("div",F,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(j.value.password,(e=>((0,s.uX)(),(0,s.CE)("div",R,(0,o.v_)(e),1)))),256))])):(0,s.Q3)("",!0)],2),(0,s.Lk)("div",{class:(0,o.C4)([{invalid:j.value.passwordSubmit},"form__field form-field"])},[S,(0,s.Lk)("div",{class:(0,o.C4)(["form-field__input-wrapper form-field__input-wrapper--password",{"show-password":P.value}])},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>N.value=e),name:"passwordSubmit",type:P.value?"text":"password",class:"form-field__input"},null,8,I),[[r.hp,N.value]]),(0,s.Lk)("button",{onClick:l[7]||(l[7]=e=>P.value=!P.value),type:"button",class:"form-field__toggle-pas form-field__toggle-pas--show"},[(0,s.bF)(a,{icon:"eye"})]),(0,s.Lk)("button",{onClick:l[8]||(l[8]=e=>P.value=!P.value),type:"button",class:"form-field__toggle-pas form-field__toggle-pas--hide"},[(0,s.bF)(a,{icon:"eye-slash"})])],2),j.value.passwordSubmit?((0,s.uX)(),(0,s.CE)("div",Q,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(j.value.passwordSubmit,(e=>((0,s.uX)(),(0,s.CE)("div",V,(0,o.v_)(e),1)))),256))])):(0,s.Q3)("",!0)],2)]),(0,s.Lk)("div",O,[(0,s.Lk)("button",{disabled:!!Y.value,type:"submit",class:"form__btn btn"},"Зарегистрироваться",8,U)]),(0,s.Lk)("div",x,(0,o.v_)(A.value),1)],32),(0,s.Lk)("div",J,[(0,s.bF)(i,{class:"login__register link",to:"/login"},{default:(0,s.k6)((()=>[(0,s.eW)("Войти")])),_:1})]),T])])])}}},A=a(1241);const W=(0,A.A)(j,[["__scopeId","data-v-933b73f4"]]);var M=W}}]);
//# sourceMappingURL=935.15bd337d.js.map